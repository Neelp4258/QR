<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trivanta Edge QR Generator</title>
    <script src="https://cdn.jsdelivr.net/npm/qrcode-generator@1.4.4/qrcode.min.js"></script>
    <style>
        :root {
            --primary-color: #3498db;
            --secondary-color: #2980b9;
            --accent-color: #2c3e50;
            --background-color: #f9f9f9;
            --card-color: #ffffff;
            --text-color: #333333;
            --border-color: #e0e0e0;
            --success-color: #2ecc71;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--background-color);
            color: var(--text-color);
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border-color);
        }

        header h1 {
            color: var(--accent-color);
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        header .logo {
            font-weight: bold;
            font-size: 2.8rem;
            color: var(--primary-color);
            margin-bottom: 10px;
            letter-spacing: 1px;
        }

        header .tagline {
            font-style: italic;
            color: var(--secondary-color);
        }

        .main-content {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }

        .options-container {
            flex: 1;
            min-width: 300px;
        }

        .preview-container {
            flex: 1;
            min-width: 300px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .card {
            background-color: var(--card-color);
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            padding: 20px;
            margin-bottom: 20px;
        }

        .card h2 {
            color: var(--primary-color);
            margin-bottom: 20px;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 10px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
        }

        input[type="text"],
        input[type="url"],
        input[type="tel"],
        input[type="email"],
        input[type="number"],
        textarea,
        select {
            width: 100%;
            padding: 10px 12px;
            border-radius: 4px;
            border: 1px solid var(--border-color);
            font-size: 16px;
            transition: border 0.3s ease;
        }

        input[type="text"]:focus,
        input[type="url"]:focus,
        input[type="tel"]:focus,
        input[type="email"]:focus,
        input[type="number"]:focus,
        textarea:focus,
        select:focus {
            border-color: var(--primary-color);
            outline: none;
        }

        input[type="color"] {
            width: 50px;
            height: 40px;
            border: none;
            border-radius: 4px;
        }

        .color-picker {
            display: flex;
            align-items: center;
        }

        .color-picker input {
            margin-right: 10px;
        }

        .color-picker span {
            font-weight: 500;
        }

        .btn {
            display: inline-block;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 4px;
            padding: 12px 24px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .btn:hover {
            background-color: var(--secondary-color);
        }

        .btn-block {
            display: block;
            width: 100%;
        }

        .btn-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .btn-secondary {
            background-color: #95a5a6;
        }

        .btn-secondary:hover {
            background-color: #7f8c8d;
        }

        #qrPreview {
            margin: 20px 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 200px;
            background-color: white;
            border-radius: 8px;
        }

        .form-section {
            display: none;
            transition: opacity 0.3s ease;
        }

        .form-section.active {
            display: block !important;
        }

        .tab-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }

        .tab-btn {
            padding: 12px 15px;
            background-color: #f1f1f1;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            flex-grow: 1;
            text-align: center;
            font-weight: 600;
            transition: background-color 0.3s ease;
            min-width: 80px;
        }

        .tab-btn.active {
            background-color: var(--primary-color);
            color: white;
        }

        .flex-row {
            display: flex;
            gap: 10px;
        }

        .flex-row .form-group {
            flex: 1;
        }

        .success-message {
            display: none;
            background-color: var(--success-color);
            color: white;
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 20px;
            font-weight: 600;
            text-align: center;
        }

        .error-message {
            display: none;
            background-color: #e74c3c;
            color: white;
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 20px;
            font-weight: 600;
            text-align: center;
        }

        .qr-settings {
            margin-top: 20px;
        }

        .qr-settings h3 {
            margin-bottom: 15px;
            color: var(--accent-color);
        }

        .hidden {
            display: none;
        }

        .size-preview {
            margin-top: 5px;
            color: #7f8c8d;
        }

        #contactForm .form-group {
            margin-bottom: 10px;
        }

        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }

            .preview-container, .options-container {
                width: 100%;
            }

            .flex-row {
                flex-direction: column;
            }
            
            body {
                padding: 5px;
            }
            
            .card {
                padding: 15px;
                margin-bottom: 15px;
            }
            
            .tab-group {
                display: grid;
                grid-template-columns: 1fr 1fr 1fr;
                gap: 8px;
            }
            
            .tab-btn {
                padding: 10px 5px;
                font-size: 15px;
            }
            
            header {
                margin-bottom: 15px;
                padding-bottom: 15px;
            }
            
            header h1 {
                font-size: 2rem;
            }
            
            header .logo {
                font-size: 2.4rem;
                color: var(--primary-color);
            }
        }

        .tooltip {
            position: relative;
            display: inline-block;
            margin-left: 5px;
            cursor: help;
        }

        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: var(--accent-color);
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 5px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 14px;
            font-weight: normal;
        }

        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }

        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .company-logo {
            height: 60px;
            margin-right: 15px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo-container">
                <!-- <img src="logo.png" alt="Trivanta Edge Logo" class="company-logo"> -->
                <div class="logo">Trivanta Edge</div>
            </div>
            <h1>QR Code Generator</h1>
            <p class="tagline">Parking, Perfected</p>
        </header>

        <div id="successMessage" class="success-message">QR code generated successfully!</div>
        <div id="errorMessage" class="error-message">Please fill all required fields!</div>

        <div class="main-content">
            <div class="options-container">
                <div class="card">
                    <h2>QR Content Type</h2>
                    <div class="tab-group">
                        <button type="button" class="tab-btn active" data-target="urlForm" onclick="switchTab('urlForm')">URL</button>
                        <button type="button" class="tab-btn" data-target="textForm" onclick="switchTab('textForm')">Text</button>
                        <button type="button" class="tab-btn" data-target="contactForm" onclick="switchTab('contactForm')">Contact</button>
                        <button type="button" class="tab-btn" data-target="emailForm" onclick="switchTab('emailForm')">Email</button>
                        <button type="button" class="tab-btn" data-target="phoneForm" onclick="switchTab('phoneForm')">Phone</button>
                        <button type="button" class="tab-btn" data-target="wifiForm" onclick="switchTab('wifiForm')">WiFi</button>
                        <button type="button" class="tab-btn" data-target="locationForm" onclick="switchTab('locationForm')">Location</button>
                    </div>

                    <!-- URL Form -->
                    <form id="urlForm" class="form-section active">
                        <div class="form-group">
                            <label for="urlInput">Website URL <span class="tooltip">ⓘ<span class="tooltiptext">Input the full URL including https://</span></span></label>
                            <input type="url" id="urlInput" name="urlInput" placeholder="https://trivantaedge.com" required>
                        </div>
                        <button type="button" class="btn btn-block" onclick="generateQRFromForm('urlForm')">Generate QR Code</button>
                    </form>

                    <!-- Text Form -->
                    <form id="textForm" class="form-section">
                        <div class="form-group">
                            <label for="textInput">Text Content</label>
                            <textarea id="textInput" name="textInput" rows="4" placeholder="Enter your text content here..." required></textarea>
                        </div>
                        <button type="button" class="btn btn-block" onclick="generateQRFromForm('textForm')">Generate QR Code</button>
                    </form>

                    <!-- Contact Form -->
                    <form id="contactForm" class="form-section">
                        <div class="flex-row">
                            <div class="form-group">
                                <label for="firstName">First Name</label>
                                <input type="text" id="firstName" name="firstName" required>
                            </div>
                            <div class="form-group">
                                <label for="lastName">Last Name</label>
                                <input type="text" id="lastName" name="lastName" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="organization">Organization</label>
                            <input type="text" id="organization" name="organization">
                        </div>
                        <div class="form-group">
                            <label for="contactPhone">Phone</label>
                            <input type="tel" id="contactPhone" name="contactPhone">
                        </div>
                        <div class="form-group">
                            <label for="contactEmail">Email</label>
                            <input type="email" id="contactEmail" name="contactEmail">
                        </div>
                        <div class="form-group">
                            <label for="website">Website</label>
                            <input type="url" id="website" name="website" placeholder="https://example.com">
                        </div>
                        <div class="form-group">
                            <label for="address">Address</label>
                            <textarea id="address" name="address" rows="3"></textarea>
                        </div>
                        <button type="button" class="btn btn-block" onclick="generateQRFromForm('contactForm')">Generate QR Code</button>
                    </form>

                    <!-- Email Form -->
                    <form id="emailForm" class="form-section">
                        <div class="form-group">
                            <label for="emailTo">Email Address</label>
                            <input type="email" id="emailTo" name="emailTo" required>
                        </div>
                        <div class="form-group">
                            <label for="emailSubject">Subject (Optional)</label>
                            <input type="text" id="emailSubject" name="emailSubject">
                        </div>
                        <div class="form-group">
                            <label for="emailBody">Email Body (Optional)</label>
                            <textarea id="emailBody" name="emailBody" rows="4"></textarea>
                        </div>
                        <button type="button" class="btn btn-block" onclick="generateQRFromForm('emailForm')">Generate QR Code</button>
                    </form>

                    <!-- Phone Form -->
                    <form id="phoneForm" class="form-section">
                        <div class="form-group">
                            <label for="phoneNumber">Phone Number</label>
                            <input type="tel" id="phoneNumber" name="phoneNumber" placeholder="+91 1234567890" required>
                        </div>
                        <button type="button" class="btn btn-block" onclick="generateQRFromForm('phoneForm')">Generate QR Code</button>
                    </form>

                    <!-- WiFi Form -->
                    <form id="wifiForm" class="form-section">
                        <div class="form-group">
                            <label for="networkName">Network Name (SSID)</label>
                            <input type="text" id="networkName" name="networkName" required>
                        </div>
                        <div class="form-group">
                            <label for="networkType">Security Type</label>
                            <select id="networkType" name="networkType">
                                <option value="WPA">WPA/WPA2/WPA3</option>
                                <option value="WEP">WEP</option>
                                <option value="nopass">No Password</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="networkPassword">Password</label>
                            <input type="text" id="networkPassword" name="networkPassword">
                        </div>
                        <div class="form-group">
                            <label for="networkHidden">Hidden Network?</label>
                            <select id="networkHidden" name="networkHidden">
                                <option value="false">No</option>
                                <option value="true">Yes</option>
                            </select>
                        </div>
                        <button type="button" class="btn btn-block" onclick="generateQRFromForm('wifiForm')">Generate QR Code</button>
                    </form>

                    <!-- Location Form -->
                    <form id="locationForm" class="form-section">
                        <div class="form-group">
                            <label for="latitude">Latitude</label>
                            <input type="number" step="any" id="latitude" name="latitude" required>
                        </div>
                        <div class="form-group">
                            <label for="longitude">Longitude</label>
                            <input type="number" step="any" id="longitude" name="longitude" required>
                        </div>
                        <button type="button" class="btn btn-block" onclick="generateQRFromForm('locationForm')">Generate QR Code</button>
                    </form>
                </div>

                <div class="card qr-settings">
                    <h2>QR Code Settings</h2>
                    <div class="form-group">
                        <label for="errorCorrection">Error Correction Level</label>
                        <select id="errorCorrection">
                            <option value="L">Low (7%)</option>
                            <option value="M" selected>Medium (15%)</option>
                            <option value="Q">Quartile (25%)</option>
                            <option value="H">High (30%)</option>
                        </select>
                        <div class="tooltip">ⓘ<span class="tooltiptext">Higher error correction makes QR code more resilient to damage but increases size</span></div>
                    </div>
                    <div class="form-group">
                        <label for="qrSize">QR Size (pixels)</label>
                        <input type="range" id="qrSize" min="100" max="500" step="10" value="300" oninput="updateSizePreview()">
                        <div class="size-preview" id="sizePreview">300 × 300 px</div>
                    </div>
                    <div class="form-group">
                        <label for="fgColor">Foreground Color</label>
                        <div class="color-picker">
                            <input type="color" id="fgColor" value="#000000">
                            <span id="fgColorValue">#000000</span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="bgColor">Background Color</label>
                        <div class="color-picker">
                            <input type="color" id="bgColor" value="#FFFFFF">
                            <span id="bgColorValue">#FFFFFF</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="preview-container">
                <div class="card">
                    <h2>QR Code Preview</h2>
                    <div id="qrPreview"></div>
                    <div class="btn-group">
                        <button class="btn" id="downloadBtn" onclick="downloadQR()" disabled>Download</button>
                        <button class="btn btn-secondary" id="printBtn" onclick="printQR()" disabled>Print</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Helper function to get element by ID
        function $(id) {
            return document.getElementById(id);
        }

        // Show and hide elements
        function showElement(element) {
            if (typeof element === 'string') {
                element = $(element);
            }
            if (element) element.style.display = 'block';
        }

        function hideElement(element) {
            if (typeof element === 'string') {
                element = $(element);
            }
            if (element) element.style.display = 'none';
        }

        function showSuccessMessage() {
            showElement($('successMessage'));
            setTimeout(() => {
                hideElement($('successMessage'));
            }, 3000);
        }

        function showErrorMessage() {
            showElement($('errorMessage'));
            setTimeout(() => {
                hideElement($('errorMessage'));
            }, 3000);
        }

        // Simple tab handler
        function switchTab(tabId) {
            // First hide all forms
            const forms = ['urlForm', 'textForm', 'contactForm', 'emailForm', 'phoneForm', 'wifiForm', 'locationForm'];
            forms.forEach(formId => {
                const form = $(formId);
                if (form) {
                    form.style.display = 'none';
                    form.classList.remove('active');
                }
            });
            
            // Then show the selected form
            const selectedForm = $(tabId);
            if (selectedForm) {
                selectedForm.style.display = 'block';
                selectedForm.classList.add('active');
            }
            
            // Update tab button states
            document.querySelectorAll('.tab-btn').forEach(btn => {
                if (btn.getAttribute('data-target') === tabId) {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });
        }

        // Initialize when DOM is fully loaded
        document.addEventListener('DOMContentLoaded', function() {
            // Set click handlers for all tab buttons
            document.querySelectorAll('.tab-btn').forEach(button => {
                button.onclick = function(e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('data-target');
                    switchTab(targetId);
                    return false;
                };
            });
            
            // Show URL form initially
            switchTab('urlForm');
            
            // Add input change handlers for colors
            if ($('fgColor')) {
                $('fgColor').addEventListener('input', (e) => {
                    if ($('fgColorValue')) $('fgColorValue').textContent = e.target.value;
                    updateQRIfExists();
                });
            }
            
            if ($('bgColor')) {
                $('bgColor').addEventListener('input', (e) => {
                    if ($('bgColorValue')) $('bgColorValue').textContent = e.target.value;
                    updateQRIfExists();
                });
            }
            
            if ($('errorCorrection')) {
                $('errorCorrection').addEventListener('change', updateQRIfExists);
            }
            
            // Set QR size updates
            if ($('qrSize')) {
                $('qrSize').addEventListener('input', updateSizePreview);
            }
        });

        function updateSizePreview() {
            const size = $('qrSize').value;
            if ($('sizePreview')) $('sizePreview').textContent = `${size} × ${size} px`;
            updateQRIfExists();
        }
        
        function updateQRIfExists() {
            if (window.currentQRData) {
                generateQR(window.currentQRData);
            }
        }

        // Form data extraction
        function getFormData(formId) {
            const form = $(formId);
            let data = '';
            
            switch(formId) {
                case 'urlForm':
                    data = $('urlInput').value.trim();
                    return data ? data : null;
                
                case 'textForm':
                    data = $('textInput').value.trim();
                    return data ? data : null;
                
                case 'contactForm':
                    const firstName = $('firstName').value.trim();
                    const lastName = $('lastName').value.trim();
                    if (!firstName || !lastName) return null;
                    
                    // Construct vCard format
                    let vCard = 'BEGIN:VCARD\nVERSION:3.0\n';
                    vCard += `N:${lastName};${firstName};;;\n`;
                    vCard += `FN:${firstName} ${lastName}\n`;
                    
                    const org = $('organization').value.trim();
                    if (org) vCard += `ORG:${org}\n`;
                    
                    const phone = $('contactPhone').value.trim();
                    if (phone) vCard += `TEL:${phone}\n`;
                    
                    const email = $('contactEmail').value.trim();
                    if (email) vCard += `EMAIL:${email}\n`;
                    
                    const website = $('website').value.trim();
                    if (website) vCard += `URL:${website}\n`;
                    
                    const address = $('address').value.trim();
                    if (address) vCard += `ADR:;;${address};;;;\n`;
                    
                    vCard += 'END:VCARD';
                    return vCard;
                
                case 'emailForm':
                    const emailTo = $('emailTo').value.trim();
                    if (!emailTo) return null;
                    
                    let emailData = `mailto:${emailTo}`;
                    const emailSubject = $('emailSubject').value.trim();
                    const emailBody = $('emailBody').value.trim();
                    
                    let hasParams = false;
                    if (emailSubject) {
                        emailData += `?subject=${encodeURIComponent(emailSubject)}`;
                        hasParams = true;
                    }
                    
                    if (emailBody) {
                        emailData += `${hasParams ? '&' : '?'}body=${encodeURIComponent(emailBody)}`;
                    }
                    
                    return emailData;
                
                case 'phoneForm':
                    const phoneNum = $('phoneNumber').value.trim();
                    return phoneNum ? `tel:${phoneNum}` : null;
                
                case 'wifiForm':
                    const ssid = $('networkName').value.trim();
                    if (!ssid) return null;
                    
                    let wifiData = `WIFI:S:${ssid};`;
                    const type = $('networkType').value;
                    wifiData += `T:${type};`;
                    
                    if (type !== 'nopass') {
                        const password = $('networkPassword').value.trim();
                        wifiData += `P:${password};`;
                    }
                    
                    const hidden = $('networkHidden').value;
                    wifiData += `H:${hidden};;`;
                    
                    return wifiData;
                
                case 'locationForm':
                    const lat = $('latitude').value.trim();
                    const lng = $('longitude').value.trim();
                    if (!lat || !lng) return null;
                    
                    return `geo:${lat},${lng}`;
                
                default:
                    return null;
            }
        }

        function generateQRFromForm(formId) {
            const data = getFormData(formId);
            if (!data) {
                showErrorMessage();
                return;
            }
            
            generateQR(data);
            showSuccessMessage();
        }

        // QR Code generation
        function generateQR(data) {
            window.currentQRData = data; // Store current QR data for regeneration
            
            const qrDiv = $('qrPreview');
            qrDiv.innerHTML = '';
            
            // Get settings
            const size = $('qrSize').value;
            const ecLevel = $('errorCorrection').value;
            const fgColor = $('fgColor').value;
            const bgColor = $('bgColor').value;
            
            try {
                // Generate QR code
                const qr = qrcode(0, ecLevel);
                qr.addData(data);
                qr.make();
                
                // Create QR code as SVG with colors
                const qrSvg = qr.createSvgTag({
                    scalable: true,
                    margin: 4,
                    cellSize: Math.floor(size / qr.getModuleCount()),
                    alt: "QR Code"
                });
                
                // Apply colors (modify the SVG string)
                const coloredSvg = qrSvg
                    .replace(/fill="black"/g, `fill="${fgColor}"`)
                    .replace(/stroke="black"/g, `stroke="${fgColor}"`)
                    .replace(/fill="white"/g, `fill="${bgColor}"`)
                    .replace(/stroke="white"/g, `stroke="${bgColor}"`);
                
                qrDiv.innerHTML = coloredSvg;
                
                // Update SVG size
                const svgElement = qrDiv.querySelector('svg');
                if (svgElement) {
                    svgElement.setAttribute('width', size);
                    svgElement.setAttribute('height', size);
                    
                    // Enable download/print buttons
                    if ($('downloadBtn')) $('downloadBtn').disabled = false;
                    if ($('printBtn')) $('printBtn').disabled = false;
                }
            } catch (err) {
                console.error("QR generation error:", err);
                qrDiv.innerHTML = `<div style="color:red;">Error generating QR code: ${err.message}</div>`;
            }
        }

        // Download QR code as PNG
        function downloadQR() {
            if (!window.currentQRData) return;
            
            const svg = $('qrPreview').querySelector('svg');
            const serializer = new XMLSerializer();
            const svgStr = serializer.serializeToString(svg);
            
            const canvas = document.createElement('canvas');
            const size = $('qrSize').value;
            canvas.width = size;
            canvas.height = size;
            
            const ctx = canvas.getContext('2d');
            ctx.fillStyle = $('bgColor').value;
            ctx.fillRect(0, 0, size, size);
            
            const img = new Image();
            const blob = new Blob([svgStr], {type: 'image/svg+xml'});
            const url = URL.createObjectURL(blob);
            
            img.onload = function() {
                ctx.drawImage(img, 0, 0, size, size);
                URL.revokeObjectURL(url);
                
                // Get active form to determine filename
                const activeForm = document.querySelector('.form-section.active');
                let filename = 'qrcode';
                
                if (activeForm) {
                    switch (activeForm.id) {
                        case 'urlForm': 
                            filename = 'url_qrcode';
                            break;
                        case 'textForm': 
                            filename = 'text_qrcode';
                            break;
                        case 'contactForm': 
                            const name = $('firstName').value.trim();
                            filename = name ? `contact_${name}_qrcode` : 'contact_qrcode';
                            break;
                        case 'emailForm': 
                            filename = 'email_qrcode';
                            break;
                        case 'phoneForm': 
                            filename = 'phone_qrcode';
                            break;
                        case 'wifiForm': 
                            const ssid = $('networkName').value.trim();
                            filename = ssid ? `wifi_${ssid}_qrcode` : 'wifi_qrcode';
                            break;
                        case 'locationForm': 
                            filename = 'location_qrcode';
                            break;
                    }
                }
                
                const a = document.createElement('a');
                a.href = canvas.toDataURL('image/png');
                a.download = `${filename}.png`;
                a.click();
            };
            
            img.src = url;
        }

        // Print QR code
        function printQR() {
            if (!window.currentQRData) return;
            
            const printWindow = window.open('', '_blank');
            
            // Get active form to determine what to print
            const activeForm = document.querySelector('.form-section.active');
            let title = 'QR Code';
            let details = '';
            
            if (activeForm) {
                switch (activeForm.id) {
                    case 'urlForm': 
                        title = 'URL QR Code';
                        details = `<p>URL: ${$('urlInput').value}</p>`;
                        break;
                    case 'textForm':
                        title = 'Text QR Code';
                        details = `<p>Text: ${$('textInput').value.substring(0, 50)}${$('textInput').value.length > 50 ? '...' : ''}</p>`;
                        break;
                    case 'contactForm':
                        title = 'Contact QR Code';
                        details = `<p>Name: ${$('firstName').value} ${$('lastName').value}</p>`;
                        if ($('organization').value) details += `<p>Organization: ${$('organization').value}</p>`;
                        break;
                    case 'emailForm':
                        title = 'Email QR Code';
                        details = `<p>Email: ${$('emailTo').value}</p>`;
                        if ($('emailSubject').value) details += `<p>Subject: ${$('emailSubject').value}</p>`;
                        break;
                    case 'phoneForm':
                        title = 'Phone QR Code';
                        details = `<p>Phone: ${$('phoneNumber').value}</p>`;
                        break;
                    case 'wifiForm':
                        title = 'WiFi QR Code';
                        details = `<p>Network: ${$('networkName').value}</p>`;
                        break;
                    case 'locationForm':
                        title = 'Location QR Code';
                        details = `<p>Coordinates: ${$('latitude').value}, ${$('longitude').value}</p>`;
                        break;
                }
            }
            
            // Create print content
            const printContent = `
                <!DOCTYPE html>
                <html>
                <head>
                    <title>Print QR Code</title>
                    <style>
                        body {
                            font-family: Arial, sans-serif;
                            text-align: center;
                            padding: 20px;
                        }
                        .qr-container {
                            margin: 20px auto;
                        }
                        .details {
                            margin-top: 20px;
                            text-align: left;
                            max-width: 500px;
                            margin: 20px auto;
                            padding: 10px;
                            border: 1px solid #ddd;
                            border-radius: 4px;
                        }
                        h1 {
                            color: #3498db;
                        }
                        .logo {
                            font-weight: bold;
                            font-size: 1.5rem;
                            color: #3498db;
                            margin-bottom: 10px;
                        }
                        @media print {
                            .no-print {
                                display: none;
                            }
                        }
                    </style>
                </head>
                <body>
                    <div class="logo">Trivanta Edge</div>
                    <h1>${title}</h1>
                    <div class="qr-container">
                        ${$('qrPreview').innerHTML}
                    </div>
                    <div class="details">
                        ${details}
                        <p>Generated on: ${new Date().toLocaleDateString()}</p>
                    </div>
                    <div class="no-print">
                        <button onclick="window.print();window.close();">Print</button>
                    </div>
                </body>
                </html>
            `;
            
            printWindow.document.open();
            printWindow.document.write(printContent);
            printWindow.document.close();
        }
    </script>
</body>
</html>
